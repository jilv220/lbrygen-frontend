{"version":3,"file":"js/698.4c9b6af9.js","mappings":"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","sources":["webpack://lbrygen-frontend/./src/components/StreamView.vue","webpack://lbrygen-frontend/./src/components/StreamView.vue?26c6"],"sourcesContent":["<template>\n    <div>\n        <div id=\"content-wrapper\" class=\"\">\n\n            <div v-if=\"sourceData != ''\" id=\"layout\" class=\"grid grid-cols-3 gap-8 mt-4 px-4\">\n\n                <div id=\"container\" class=\"grid grid-rows-9 col-span-2\">\n\n                    <div id=\"iframe-container\">\n                        <iframe allowfullscreen webkitallowfullscreen :src=\"streamUrl\" frameborder=\"0\">\n                        </iframe>\n                    </div>\n\n                    <div id=\"stream-info\" class=\"mt-6\">\n\n                        <h1 id=\"stream-title\">\n                            {{ title }}\n                        </h1>\n\n                        <div id=\"stream-info-divider\" class=\"divider h-0\"></div>\n\n                        <LGAvatarLabel id=\"stream-channel\" class=\"flex-x-start\"\n                        :showAvatar=\"this.showAvatar\"\n                        :showName=\"true\"\n                        :avatar=\"this.avatar\"\n                        :channelName=\"this.channelName\">\n                            <template v-slot:lg-label>\n                                {{ this.channelName }}\n                            </template>\n                        </LGAvatarLabel>\n\n                        <div id=\"stream-desc\">\n                            <div v-for=\"(line, index) in descList\" :key=\"index\">\n                                <span v-html=\"linkify(line)\"></span>\n                            </div>\n                        </div>\n\n                        <button id=\"expand-btn\" class=\"text-green\" @click=\"expandDesc('stream-desc')\">More</button>\n                    </div>\n                </div>\n\n                <div id=\"related-videos\" class=\"card flex-1 md:px-2\">\n                    <li v-for=\"item in sourceData.result.items\" :key=\"item\">\n                        <SearchItem \n                        :thumbnail=\"item.value.thumbnail\" \n                        :streamUrl=\"item.short_url\" \n                        :showAvatar=\"false\"\n                        :avatar=\"item.signing_channel\"\n                        >\n                            <template v-slot:center>\n                                {{ item.name }}\n                            </template>\n                            \n                        </SearchItem>\n                    </li>\n                </div>\n\n            </div>\n\n            <div v-else id=\"stream-loading\" class=\"flex-y-center\">\n                <div class=\"fancy-spinner\">\n                    <div class=\"ring\"></div>\n                    <div class=\"ring\"></div>\n                    <div class=\"dot\"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport EventService from \"../services/EventService.js\"\nimport { useStreamStore } from \"@/stores/StreamStore.js\"\nimport SearchItem from '@/components/SearchItem.vue'\nimport { linkify } from \"@/utils/ReUtils.js\"\nimport LGAvatarLabel from \"@/components/LGAvatarLabel.vue\"\n\nexport default {\n    props: {\n        claimUrl: String,\n    },\n    components: {\n        SearchItem,\n        LGAvatarLabel\n    },\n    setup() {\n        const stream = useStreamStore()\n        return { stream }\n    },\n    data() {\n        return {\n            avatar: undefined,\n            channelName: '',\n            sourceData: '',\n            title: '',\n            descList: [''],\n            streamUrl: '',\n            shouldExpand: true,\n            showAvatar: true\n        }\n    },\n    mounted() {\n\n        // Only load to template when mutation happens\n        this.stream.$subscribe((mutation, state) => {\n\n            this.title = this.stream.getStreamTitle\n            this.descList = this.stream.getStreamDesc.split('\\n')\n            this.streamUrl = this.stream.getStreamUrl\n            this.avatar = this.stream.getAvatar\n            this.channelName = this.stream.getChannelName\n\n            // Make sure only request once\n            if (mutation.storeId == 'stream' && this.sourceData == '') {\n\n                EventService.getContent('tag', 'video', state.stream.tags, 1, 18, \"trending_group\").then((response) => {\n\n                    //console.log(response)\n                    if (response.error !== undefined) {\n                        console.error(response)\n                    } else {\n                        this.sourceData = response\n                    }\n                }).then(() => {\n\n                    // TODO: Refactor screenUtil\n                    console.log(window.screen.width)\n                    this.adaptScreen(window.screen.width)\n                    for (let sw = 375; sw < 1200 ; sw+=10) {\n                        // console.log(sw)\n                        window.matchMedia(`(min-width: ${sw}px)`)\n                              .addEventListener(\"change\", () => {\n                                  this.adaptScreen(window.screen.width)\n                              });    \n                    }\n                })\n            }\n        })\n    },\n    methods: {\n        linkify,\n        expandDesc(eleToExpand) {\n            if (this.shouldExpand) {\n                document.getElementById('expand-btn').innerHTML = 'Less'\n                document.getElementById(eleToExpand).style.overflow = 'unset'\n                document.getElementById(eleToExpand).style.maxHeight = 'unset'\n            } else {\n                document.getElementById('expand-btn').innerHTML = 'More'\n                document.getElementById(eleToExpand).style.overflow = 'hidden'\n                document.getElementById(eleToExpand).style.maxHeight = '10em'\n            }\n            this.shouldExpand = !this.shouldExpand\n        },\n        adaptScreen(screenWidth) {\n            let iframeContainer = document.getElementById('iframe-container')\n\n            if(iframeContainer) {\n                iframeContainer.style.width = `${screenWidth}px`\n                iframeContainer.style.height = `${screenWidth / 16 * 9}px`\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\nspan {\n    display: block;\n    margin-block-start: 1em;\n    margin-block-end: 1em;\n}\n\niframe {\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n}\n\n@media (min-width: 1200px) {\n    #iframe-container {\n        width: auto !important;\n        height: 630px !important;\n    }\n}\n\n#container {\n    position: relative;\n    padding-bottom: 200%;\n    overflow: hidden;\n}\n\n/* md screen */\n@media (max-width: 1200px) {\n\n    #layout {\n        display: unset;\n    }\n\n    #container {\n        padding-bottom: 1rem;\n    }\n\n    #stream-info {\n        @apply px-4;\n    }\n}\n\n#content-wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    padding-top: 4rem;\n}\n\n#stream-loading {\n    padding-top: 17.5%;\n}\n\n#stream-loading .fancy-spinner div.ring {\n    border-width: 2rem;\n    width: 20rem;\n    height: 20rem;\n    box-shadow: none;\n}\n\n#stream-info {\n    text-align: start;\n    overflow: auto;\n    overflow-wrap: break-word;\n}\n\n#stream-channel {\n\n    #channel-title {\n        font-size: 1rem;\n        font-weight: 700;\n    }\n\n    .avatar {\n        @apply w-12;\n        @apply h-12;\n    }\n\n    #channel-name {\n        font-size: 0.78rem;\n        font-weight: 300;\n    }\n}\n\n#stream-info-divider {\n    @apply my-3\n}\n\n#stream-title {\n    display: block;\n    align-items: center;\n    font-size: 1.3rem;\n    font-weight: 700;\n}\n\n#stream-desc {\n    max-width: 50em;\n    overflow: hidden;\n    max-height: 10em;\n}\n\n#expand-btn {\n    font-size: 1.1rem;\n    font-weight: 400;\n}\n</style>","import { render } from \"./StreamView.vue?vue&type=template&id=179a2134\"\nimport script from \"./StreamView.vue?vue&type=script&lang=js\"\nexport * from \"./StreamView.vue?vue&type=script&lang=js\"\n\nimport \"./StreamView.vue?vue&type=style&index=0&id=179a2134&lang=scss\"\n\nimport exportComponent from \"/home/sashimi/Coding/lbrygen-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","_createElementVNode","_hoisted_13","_createElementBlock","$data","allowfullscreen","webkitallowfullscreen","src","frameborder","_hoisted_5","_toDisplayString","_hoisted_8","_createVNode","_component_LGAvatarLabel","showAvatar","showName","avatar","channelName","_withCtx","_Fragment","_renderList","line","index","key","innerHTML","$options","onClick","result","items","item","_component_SearchItem","thumbnail","value","streamUrl","short_url","signing_channel","center","name","_hoisted_14","props","claimUrl","String","components","SearchItem","LGAvatarLabel","setup","stream","useStreamStore","data","undefined","sourceData","title","descList","shouldExpand","mounted","this","$subscribe","mutation","state","getStreamTitle","getStreamDesc","split","getStreamUrl","getAvatar","getChannelName","storeId","EventService","tags","then","response","error","console","log","window","screen","width","adaptScreen","sw","matchMedia","addEventListener","methods","linkify","expandDesc","eleToExpand","document","getElementById","style","overflow","maxHeight","screenWidth","iframeContainer","height","__exports__","render"],"sourceRoot":""}