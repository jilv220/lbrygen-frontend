{"version":3,"file":"js/865.98c67d83.js","mappings":"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","sources":["webpack://lbrygen-frontend/./src/components/StreamView.vue","webpack://lbrygen-frontend/./src/components/StreamView.vue?26c6"],"sourcesContent":["<template>\n    <div>\n        <div id=\"content-wrapper\" class=\"\">\n\n            <div v-if=\"sourceData != ''\" id=\"layout\" class=\"grid grid-cols-3 gap-8 mt-4 px-4\">\n\n                <div id=\"container\" class=\"grid grid-rows-9 col-span-2\">\n\n                    <div id=\"iframe-container\">\n                        <iframe allowfullscreen webkitallowfullscreen :src=\"streamUrl\" frameborder=\"0\">\n                        </iframe>\n                    </div>\n\n                    <div id=\"stream-info\" class=\"mt-6\">\n\n                        <h1 id=\"stream-title\">\n                            {{ title }}\n                        </h1>\n\n                        <div id=\"stream-info-divider\" class=\"divider h-0\"></div>\n\n                        <LGAvatarLabel id=\"stream-channel\" class=\"flex-x-start\" \n                            :showAvatar=\"this.showAvatar\"\n                            :showName=\"true\" \n                            :avatar=\"this.avatar\" \n                            :channelName=\"this.channelName\">\n                                <template v-slot:lg-label>\n                                    {{ this.channelName }}\n                                </template>\n                        </LGAvatarLabel>\n\n                        <div id=\"stream-desc\">\n                            <div v-for=\"(line, index) in descList\" :key=\"index\">\n                                <span v-html=\"linkify(line)\"></span>\n                            </div>\n                        </div>\n\n                        <button id=\"expand-btn\" class=\"text-green\" @click=\"expandDesc('stream-desc')\">More</button>\n                    </div>\n                </div>\n\n                <div id=\"related-videos\" class=\"card flex-1 md:px-2\">\n                    <li v-for=\"item in sourceData.result.items\" :key=\"item\">\n                        <SearchItem :thumbnail=\"item.value.thumbnail\" :streamUrl=\"item.short_url\" :showAvatar=\"false\"\n                            :avatar=\"item.signing_channel\">\n                            <template v-slot:center>\n                                {{ item.name }}\n                            </template>\n\n                        </SearchItem>\n                    </li>\n                </div>\n\n            </div>\n\n            <div v-else id=\"stream-loading\" class=\"flex-y-center\">\n                <div class=\"fancy-spinner\">\n                    <div class=\"ring\"></div>\n                    <div class=\"ring\"></div>\n                    <div class=\"dot\"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport EventService from \"../services/EventService.js\"\nimport { useStreamStore } from \"@/stores/StreamStore.js\"\nimport SearchItem from '@/components/SearchItem.vue'\nimport { linkify } from \"@/utils/ReUtils.js\"\nimport LGAvatarLabel from \"@/components/LGAvatarLabel.vue\"\n\nexport default {\n    props: {\n        claimUrl: String,\n    },\n    components: {\n        SearchItem,\n        LGAvatarLabel\n    },\n    setup() {\n        const stream = useStreamStore()\n        return { stream }\n    },\n    data() {\n        return {\n            avatar: undefined,\n            channelName: '',\n            claimUrlTranformed: '',\n            sourceData: '',\n            title: '',\n            descList: [''],\n            shortUrl: '',\n            streamUrl: '',\n            windowWidth: '',\n            shouldExpand: true,\n            showAvatar: true\n        }\n    },\n    watch: {\n        windowWidth() {\n            //console.log(this.windowWidth)\n            this.adaptScreen(window.screen.width)\n        }\n    },\n    mounted() {\n        let claimUrlCopy = this.claimUrl.split('#').join(':')\n        this.claimUrlTranformed = claimUrlCopy\n\n        window.addEventListener('resize', () => {\n            this.windowWidth = window.innerWidth\n        })\n\n        let tags = ['']\n        //console.log(this.claimUrlTranformed)\n        EventService.resolveClaimSingle(this.claimUrlTranformed)\n            .then((response) => {\n                //console.log(response)\n                if (response.error !== undefined) {\n                    console.error(response)\n                } else {\n                    let result = response.result\n\n                    let avatar = result[this.claimUrlTranformed].signing_channel\n                    if (avatar) { this.avatar = avatar }\n\n                    let shortUrl = result[this.claimUrlTranformed].short_url\n                    if (shortUrl) { this.shortUrl = shortUrl }\n                    \n                    let value = result[this.claimUrlTranformed].value\n                    let title = value.title\n                    tags = value.tags\n                    let desc = value.description\n\n                    if (value) {\n                        if (desc) {\n                            this.descList = desc.split('\\n')\n                        }\n                        if (title) {\n                            this.title = title\n                        }\n                    }\n                }\n            })\n            .then(() => {\n                EventService.getStreamByUrl(this.shortUrl)\n                    .then((response) => {\n                        //console.log(response)\n                        if (response.error !== undefined) {\n                            console.error(response)\n                        } else {\n                            this.streamUrl = response.streaming_url\n                            this.adaptScreen(window.screen.width)\n                        }\n                    })\n            })\n            .then(() => {\n                function getRandomInt(max) {\n                    return Math.floor(Math.random() * max);\n                }\n                \n                EventService.getContent('tag', 'video', tags, getRandomInt(21), 18, \"trending_group\")\n                    .then((response) => {\n                        if (response.error !== undefined) {\n                            console.error(response)\n                        } else {\n                            this.sourceData = response\n                        }\n                    })\n            })\n            .catch(e => {\n                console.error('fucked up in stupid long chainquery : ' + e)\n            })\n    },\n    methods: {\n        linkify,\n        expandDesc(eleToExpand) {\n            if (this.shouldExpand) {\n                document.getElementById('expand-btn').innerHTML = 'Less'\n                document.getElementById(eleToExpand).style.overflow = 'unset'\n                document.getElementById(eleToExpand).style.maxHeight = 'unset'\n            } else {\n                document.getElementById('expand-btn').innerHTML = 'More'\n                document.getElementById(eleToExpand).style.overflow = 'hidden'\n                document.getElementById(eleToExpand).style.maxHeight = '10em'\n            }\n            this.shouldExpand = !this.shouldExpand\n        },\n        adaptScreen(screenWidth) {\n            let iframeContainer = document.getElementById('iframe-container')\n\n            if (iframeContainer) {\n                iframeContainer.style.width = `${screenWidth}px`\n                iframeContainer.style.height = `${screenWidth / 16 * 9}px`\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\nspan {\n    display: block;\n    margin-block-start: 1em;\n    margin-block-end: 1em;\n}\n\niframe {\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n}\n\n@media (min-width: 1240px) {\n    #iframe-container {\n        width: auto !important;\n        height: 630px !important;\n    }\n}\n\n#container {\n    position: relative;\n    padding-bottom: 200%;\n    overflow: hidden;\n}\n\n/* md screen */\n@media (max-width: 1240px) {\n\n    #layout {\n        display: unset;\n    }\n\n    #container {\n        padding-bottom: 1rem;\n    }\n\n    #stream-info {\n        @apply px-4;\n    }\n}\n\n#content-wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    padding-top: 4rem;\n}\n\n#stream-loading {\n    padding-top: 17.5%;\n}\n\n#stream-loading .fancy-spinner div.ring {\n    border-width: 2rem;\n    width: 20rem;\n    height: 20rem;\n    box-shadow: none;\n}\n\n#stream-info {\n    text-align: start;\n    overflow: auto;\n    overflow-wrap: break-word;\n}\n\n#stream-channel {\n\n    #channel-title {\n        font-size: 1rem;\n        font-weight: 700;\n    }\n\n    .avatar {\n        @apply w-12;\n        @apply h-12;\n    }\n\n    #channel-name {\n        font-size: 0.78rem;\n        font-weight: 300;\n    }\n}\n\n#stream-info-divider {\n    @apply my-3\n}\n\n#stream-title {\n    display: block;\n    align-items: center;\n    font-size: 1.3rem;\n    font-weight: 700;\n}\n\n#stream-desc {\n    max-width: 50em;\n    overflow: hidden;\n    max-height: 10em;\n}\n\n#expand-btn {\n    font-size: 1.1rem;\n    font-weight: 400;\n}\n</style>","import { render } from \"./StreamView.vue?vue&type=template&id=32b2b2cf\"\nimport script from \"./StreamView.vue?vue&type=script&lang=js\"\nexport * from \"./StreamView.vue?vue&type=script&lang=js\"\n\nimport \"./StreamView.vue?vue&type=style&index=0&id=32b2b2cf&lang=scss\"\n\nimport exportComponent from \"/home/sashimi/Coding/lbrygen-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","class","_createElementVNode","_hoisted_13","_createElementBlock","$data","allowfullscreen","webkitallowfullscreen","src","frameborder","_hoisted_5","_toDisplayString","_hoisted_8","_createVNode","_component_LGAvatarLabel","showAvatar","showName","avatar","channelName","_withCtx","_Fragment","_renderList","line","index","key","innerHTML","$options","onClick","result","items","item","_component_SearchItem","thumbnail","value","streamUrl","short_url","signing_channel","center","name","_hoisted_14","props","claimUrl","String","components","SearchItem","LGAvatarLabel","setup","stream","useStreamStore","data","undefined","claimUrlTranformed","sourceData","title","descList","shortUrl","windowWidth","shouldExpand","watch","this","adaptScreen","window","screen","width","mounted","claimUrlCopy","split","join","addEventListener","innerWidth","tags","EventService","then","response","error","console","desc","description","streaming_url","getRandomInt","max","Math","floor","random","catch","e","methods","linkify","expandDesc","eleToExpand","document","getElementById","style","overflow","maxHeight","screenWidth","iframeContainer","height","__exports__","render"],"sourceRoot":""}