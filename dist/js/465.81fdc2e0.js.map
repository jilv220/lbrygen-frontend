{"version":3,"file":"js/465.81fdc2e0.js","mappings":"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","sources":["webpack://lbrygen-frontend/./src/stores/StreamStore.js","webpack://lbrygen-frontend/./src/utils/ReUtils.js","webpack://lbrygen-frontend/./src/components/SearchItem.vue","webpack://lbrygen-frontend/./src/components/SearchItem.vue?777b","webpack://lbrygen-frontend/./src/components/StreamView.vue","webpack://lbrygen-frontend/./src/components/StreamView.vue?26c6"],"sourcesContent":["import { defineStore } from 'pinia'\nimport EventService from \"../services/EventService.js\"\n\nlet streamModel = {\n    url: '',\n    desc: '',\n    title: '',\n    tags: ['']\n}\n\nexport const useStreamStore = defineStore (\n    'stream', \n    {\n        state: () => ({\n            stream : streamModel\n        }),\n        getters: {\n            getStreamUrl: (state) => state.stream.url,\n            getStreamDesc: (state) => state.stream.desc,\n            getStreamTitle: (state) => state.stream.title,\n            getStreamTags: (state) => state.stream.tags \n        },\n        actions: {\n            async requestStream(url) {\n                EventService.getStreamByUrl(url).then((response) => {\n\n                    this.stream.url = response.streaming_url\n\n                    if (response.metadata !== undefined) {\n                        \n                        if (response.metadata.description !== undefined) {\n                            this.stream.desc = response.metadata.description\n                        } else {\n                            this.stream.desc = 'No video description found.'\n                        }\n\n                        if (response.metadata.title !== undefined) {\n                            this.stream.title = response.metadata.title\n                        } else {\n                            this.stream.title = response.metadata.source.name\n                        }\n\n                        if (response.metadata.tags !== undefined) {\n                            this.stream.tags = Object.values(response.metadata.tags)\n                        }\n                    }\n                })\n            },\n        }\n        \n    }\n)\n","exports.linkify = (str) => {\n    /* eslint-disable no-useless-escape */\n    let re = /(?![^<]*>|[^<>]*<\\/)((https?:)\\/\\/[a-z0-9&#=.\\/\\-?_]+)/gi\n    let res = str.replace(re, '<a href=\"$1\" target=\"_blank\">$1</a>')\n\n    return res\n}","<template>\n    <div class=\"flex-x items-stretch\">\n\n        <div class=\"avatar\">\n            <div id=\"thumbnail\" class=\"rounded\">\n                <img v-if=\"thumbnail\" :src=\"thumbnail.url\">\n            </div>\n        </div>\n\n        <div id=\"streaming-url-wrapper\" class=\"flex-1 grid\">\n\n            <label id=\"streaming-url\" @click=\"getStream(streamUrl)\">\n                <slot name=\"center\"></slot>\n            </label>\n\n            <div class=\"flex-x-start mt-2\">\n\n                <div v-if=\"showAvatar\" id=\"channel-avatar-wrapper\" class=\"avatar mr-2\">\n                    <div id=\"channel-avatar\" class=\"rounded-full\">\n                        <img v-if=\"avatar \n                                && avatar.value \n                                && avatar.value.thumbnail\" \n                            :src=\"avatar.value.thumbnail.url\" loading=\"lazy\">\n                    </div>\n                </div>\n                <div v-else></div>\n\n                <label id=\"channel-name\">\n                    <slot name=\"center-sub\"></slot>\n                </label>\n\n            </div>\n\n        </div>\n\n        <div id=\"search-result-rear\" class=\"grid grid-rows-6\">\n            <slot name=\"rear\"></slot>\n        </div>\n\n    </div>\n    <div class=\"divider h-0\"></div>\n</template>\n\n<script>\nimport { useStreamStore } from \"@/stores/StreamStore.js\";\nexport default {\n    props: {\n        thumbnail: Object,\n        streamUrl: String,\n        avatar: Object,\n        showAvatar: {\n            default: true,\n            type: Boolean\n        },\n    },\n    setup() {\n        const stream = useStreamStore()\n        return { stream }\n    },\n    methods: {\n         async getStream(url) {\n            window.scrollTo(0,0)\n            this.stream.requestStream(url).then (() => {\n\n                this.$router.push({ \n                    name: 'stream', \n                    query: { url:  url}\n                })\n            })\n        },\n    }\n}\n</script>\n\n<style>\n#search-result-rear {\n    align-content: center;\n}\n\n#streaming-url-wrapper {\n    padding-left: calc(3rem/2);\n    width: 300px;\n    text-align: start;\n    align-self: flex-start;\n    font-size: 1rem;\n    font-weight: 700;  \n}\n\n#streaming-url {\n    cursor: pointer;\n\n    /* Standard way to clamp */\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n\n#channel-avatar {\n    width: 2.1rem;\n    height: 2.1rem;\n}\n\n#channel-name {\n    font-size: 0.78rem;\n    font-weight: 300;\n}\n\n#thumbnail {\n    width: calc(12rem * 1.2);\n    height: calc(12rem * 0.6);\n}\n\n/* md screen */\n@media (max-width: 960px) {\n    #search-result-rear {\n        display: none;\n    }\n}\n\n</style>","import { render } from \"./SearchItem.vue?vue&type=template&id=ab877f4a\"\nimport script from \"./SearchItem.vue?vue&type=script&lang=js\"\nexport * from \"./SearchItem.vue?vue&type=script&lang=js\"\n\nimport \"./SearchItem.vue?vue&type=style&index=0&id=ab877f4a&lang=css\"\n\nimport exportComponent from \"/home/sashimi/Coding/lbrygen-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div>\n        <div id=\"content-wrapper\" class=\"\">\n\n            <div v-if=\"sourceData != ''\" id=\"layout\" class=\"grid grid-cols-3 gap-8 mt-4 px-4\">\n\n                <div id=\"container\" class=\"grid grid-rows-9 col-span-2\">\n                    <iframe width=\"1280\" height=\"630\" allowfullscreen webkitallowfullscreen :src=\"stream.getStreamUrl\"\n                        frameborder=\"0\">\n                    </iframe>\n\n                    <div id=\"stream-info\" class=\"mt-6\">\n\n                        <h1 id=\"stream-title\">\n                            {{ title }}\n                        </h1>\n\n                        <div id=\"stream-info-divider\" class=\"divider h-0\"></div>\n\n                        <div id=\"stream-desc\">\n                            <div v-for=\"(line, index) in descList\" :key=\"index\">\n                                <span v-html=\"linkify(line)\"></span>\n                            </div>\n                        </div>\n\n                        <button id=\"expand-btn\" class=\"text-green\" @click=\"expandDesc()\">More</button>\n                    </div>\n                </div>\n\n                <div id=\"related-videos\" class=\"card flex-1\">\n                    <li v-for=\"item in sourceData.result.items\" :key=\"item\">\n                        <SearchItem :thumbnail=\"item.value.thumbnail\" :streamUrl=\"item.short_url\" :showAvatar=\"false\">\n\n                            <template v-slot:center>\n                                {{ item.name }}\n                            </template>\n\n                            <template v-slot:center-sub>\n                                <div v-if=\"item.signing_channel\n                                && item.signing_channel.value\">\n                                    {{ item.signing_channel.value.title }}\n                                </div>\n                                <div v-else> Anonymous </div>\n                            </template>\n                            \n                        </SearchItem>\n                    </li>\n                </div>\n\n            </div>\n\n            <div v-else id=\"stream-loading\" class=\"flex-y-center\">\n                <div class=\"fancy-spinner\">\n                    <div class=\"ring\"></div>\n                    <div class=\"ring\"></div>\n                    <div class=\"dot\"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport EventService from \"../services/EventService.js\"\nimport { useStreamStore } from \"@/stores/StreamStore.js\"\nimport SearchItem from '@/components/SearchItem.vue'\nimport { linkify } from \"@/utils/ReUtils.js\"\n\nexport default {\n    props: {\n        streamUrl: String,\n    },\n    components: {\n        SearchItem\n    },\n    setup() {\n        const stream = useStreamStore()\n        return { stream }\n    },\n    data() {\n        return {\n            sourceData: '',\n            title: '',\n            descList: [''],\n            shouldExpand: true\n        }\n    },\n    mounted() {\n\n        // Only load to template when mutation happens\n        this.stream.$subscribe((mutation, state) => {\n\n            this.title = this.stream.getStreamTitle\n            this.descList = this.stream.getStreamDesc.split('\\n')\n\n            // Make sure only request once\n            if (mutation.storeId == 'stream' && this.sourceData == '') {\n\n                EventService.getContent('tag', 'video', state.stream.tags, 1, 18, \"trending_group\").then((response) => {\n\n                    //console.log(response)\n                    if (response.error !== undefined) {\n                        console.error(response)\n                    } else {\n                        this.sourceData = response\n                    }\n                })\n            }\n        })\n    },\n    methods: {\n        linkify,\n        expandDesc() {\n            if (this.shouldExpand) {\n                document.getElementById('expand-btn').innerHTML = 'Less'\n                document.getElementById('stream-desc').style.overflow = 'unset'\n                document.getElementById('stream-desc').style.maxHeight = 'unset'\n            } else {\n                document.getElementById('expand-btn').innerHTML = 'More'\n                document.getElementById('stream-desc').style.overflow = 'hidden'\n                document.getElementById('stream-desc').style.maxHeight = '10em'\n            }\n            this.shouldExpand = !this.shouldExpand\n        }\n    }\n}\n</script>\n\n<style>\nspan {\n    display: block;\n    margin-block-start: 1em;\n    margin-block-end: 1em;\n}\n\niframe {\n    top: 0;\n    left: 0;\n    width: 100%;\n}\n\n#container {\n    position: relative;\n    padding-bottom: 200%;\n    overflow: hidden;\n}\n\n/* md screen */\n@media (max-width: 1200px) {\n\n    #layout {\n        display: unset;\n    }\n\n    #container {\n        padding-bottom: 1rem;\n    }\n\n    #stream-info {\n        @apply px-4;\n    }\n}\n\n#content-wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    padding-top: 4rem;\n}\n\n#stream-loading {\n    padding-top: 17.5%;\n}\n\n#stream-loading .fancy-spinner div.ring {\n    border-width: 2rem;\n    width: 20rem;\n    height: 20rem;\n    box-shadow: none;\n}\n\n#stream-info {\n    text-align: start;\n}\n\n#stream-info-divider {\n    @apply my-3\n}\n\n#stream-title {\n    display: block;\n    align-items: center;\n    font-size: 1.3rem;\n    font-weight: 700;\n}\n\n#stream-desc {\n    max-width: 50em;\n    overflow: hidden;\n    max-height: 10em;\n}\n\n#expand-btn {\n    font-size: 1.1rem;\n    font-weight: 400;\n}\n</style>","import { render } from \"./StreamView.vue?vue&type=template&id=450e9e46\"\nimport script from \"./StreamView.vue?vue&type=script&lang=js\"\nexport * from \"./StreamView.vue?vue&type=script&lang=js\"\n\nimport \"./StreamView.vue?vue&type=style&index=0&id=450e9e46&lang=css\"\n\nimport exportComponent from \"/home/sashimi/Coding/lbrygen-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["streamModel","url","desc","title","tags","useStreamStore","defineStore","state","stream","getters","getStreamUrl","getStreamDesc","getStreamTitle","getStreamTags","actions","async","EventService","then","response","this","streaming_url","undefined","metadata","description","source","name","Object","values","exports","str","re","res","replace","class","id","_createElementVNode","$props","_createElementBlock","src","onClick","$options","_renderSlot","_ctx","value","thumbnail","loading","_hoisted_10","_hoisted_13","props","streamUrl","String","avatar","showAvatar","default","type","Boolean","setup","methods","window","scrollTo","requestStream","$router","push","query","__exports__","render","_hoisted_14","$data","width","height","allowfullscreen","webkitallowfullscreen","$setup","frameborder","_hoisted_4","_toDisplayString","_hoisted_7","_Fragment","_renderList","line","index","key","innerHTML","result","items","item","_createVNode","_component_SearchItem","short_url","center","_withCtx","signing_channel","_hoisted_11","_hoisted_12","_hoisted_15","components","SearchItem","data","sourceData","descList","shouldExpand","mounted","$subscribe","mutation","split","storeId","error","console","linkify","expandDesc","document","getElementById","style","overflow","maxHeight"],"sourceRoot":""}